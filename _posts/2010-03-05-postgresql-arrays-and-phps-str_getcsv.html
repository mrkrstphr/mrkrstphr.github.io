---
layout: post
title: PostgreSQL arrays and PHP's str_getcsv()
categories:
- Database
- Programming
tags:
- PHP
- PostgreSQL
status: publish
type: post
published: true
meta:
  _edit_last: '2'
  _syntaxhighlighter_encoded: '1'
  _jd_twitter: ''
  _jd_tweet_this: 'yes'
  _wp_jd_clig: ''
  _wp_jd_bitly: ''
  _wp_jd_wp: ''
  _wp_jd_yourls: ''
  _wp_jd_url: ''
  _wp_jd_target: ''
  _jd_wp_twitter: ''
  _jd_post_meta_fixed: 'true'
---
Yesterday, while trying to figure out the best way to deal with PostgreSQL arrays in PHP, I came across the new <code>str_getcsv()</code> function in PHP as of 5.3. This function works much the same as <code>fgetcsv</code> to parse a CSV line, except that it works on a string instead of a file. 

For quick reference, CSV looks like this: 

<pre class="prettyprint">"My Name",14,"32,000","2009-04-15"</pre>

And the return value of a PostgreSQL array looks like this: 

<pre class="prettyprint">{"My Name",14,"32,000","2009-04-15"}</pre>

Notice the similarities? 

We can use PHP's <code>trim</code> and <code>str_getcsv</code> to turn this PostgreSQL array into a PHP array:

<pre class="prettyprint language-php">$data = str_getcsv(trim($record->value, '{}'));</pre>

Simple as simple does. As long as your array has only a single dimension. If you're using multidimensional arrays in PostgreSQL then you're dead to me. 
